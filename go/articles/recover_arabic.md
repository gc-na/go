<!--
Meta Description: # استرداد الأخطاء في لغة Go: استخدام الدالة recover ## ملخص تعتبر الدالة `recover` في لغة Go أداة قوية تسمح بإعادة استرداد البرنامج من حالة الفشل النا...
Meta Keywords: recover, استخدام, fmt, البرنامج, حالة
-->

# استرداد الأخطاء في لغة Go: استخدام الدالة recover

## ملخص
تعتبر الدالة `recover` في لغة Go أداة قوية تسمح بإعادة استرداد البرنامج من حالة الفشل الناتجة عن حدوث خطأ (panic). تُستخدم هذه الدالة داخل دالة مؤمنة (defer) لتجنب انهيار البرنامج.

## الوثائق
### الغرض
تستخدم الدالة `recover` لاستعادة السيطرة على البرنامج في حالة حدوث حالة فشل (panic). عندما يتم استدعاء `recover`، فإنها تعيد القيمة التي تسببت في فشل البرنامج، مما يتيح للمطورين التعامل مع الأخطاء بشكل أكثر مرونة.

### الاستخدام
يمكن استخدام `recover` فقط داخل دالة تم تأخيرها بواسطة `defer`. يجب أن تكون دالة `recover` غير موجودة في دالة أخرى غير دالة مؤمنة. إذا تم استدعاء `recover` خارج دالة مؤمنة، فإنها ستعيد nil ولن تُعيد أي قيمة.

### التفاصيل
- **متى تستخدم `recover`:** يتم استخدام `recover` عادةً في حالة وجود احتمال كبير لحدوث فشل خلال تنفيذ برنامج، مثل معالجة البيانات أو العمليات الحسابية الحساسة.
- **كيفية عملها:** تقوم `recover` بإعادة القيمة التي تسببت في حالة الفشل (panic) وتوقف عملية الفشل. إذا تم استدعاء `recover` في حالة عدم وجود فشل، فإنها تعيد nil.

## أمثلة
### مثال 1: الاستخدام الأساسي
```go
package main

import (
	"fmt"
)

func mayPanic() {
	panic("حدث خطأ!")
}

func safeCall() {
	defer func() {
		if r := recover(); r != nil {
			fmt.Println("استرداد من الفشل:", r)
		}
	}()
	mayPanic()
	fmt.Println("لن يتم تنفيذ هذا السطر.")
}

func main() {
	safeCall()
	fmt.Println("البرنامج لا يزال يعمل.")
}
```

### مثال 2: استرداد القيم
```go
package main

import (
	"fmt"
)

func riskyFunction() {
	defer func() {
		if r := recover(); r != nil {
			fmt.Println("استرداد من الفشل:", r)
		}
	}()
	var a []int
	fmt.Println(a[1]) // سيؤدي هذا إلى حدوث فشل
}

func main() {
	riskyFunction()
	fmt.Println("البرنامج لا يزال يعمل بعد الاسترداد.")
}
```

## الشرح
### العثرات الشائعة
- **استخدام `recover` خارج دالة مؤمنة:** ستعيد `recover` nil، مما يعني أنك لن تحصل على أي معلومات حول الخطأ.
- **عدم استخدام `defer`:** إذا لم يتم استخدام `defer`، فلن يتمكن البرنامج من استعادة السيطرة بعد الفشل.

### ملاحظات إضافية
- من المهم استخدام `recover` بحذر، حيث إن استخدامها بشكل غير صحيح يمكن أن يؤدي إلى صعوبة في تتبع الأخطاء.
- يُفضل استخدام `recover` فقط في الأماكن التي تتوقع فيها حدوث الأخطاء، وليس في كل مكان.

## ملخص جملة واحدة
تعتبر الدالة `recover` في Go وسيلة لاستعادة السيطرة بعد حدوث حالة فشل، مما يسمح بتنفيذ برامج أكثر استقراراً ومرونة.