<!--
Meta Description: # إغلاق (Close) في لغة Go: الدليل الشامل ## ملخص تُستخدم دالة `close` في لغة Go لإغلاق القنوات (channels) بعد الانتهاء من استخدامها، مما يمنع أي عمليا...
Meta Keywords: القناة, إغلاق, close, بعد, إغلاقها
-->

# إغلاق (Close) في لغة Go: الدليل الشامل

## ملخص
تُستخدم دالة `close` في لغة Go لإغلاق القنوات (channels) بعد الانتهاء من استخدامها، مما يمنع أي عمليات إرسال أو استقبال بيانات جديدة. تساهم هذه الدالة في إدارة الموارد بشكل فعال وتجنب تسرب الذاكرة.

## الوثائق
### الغرض
تُعتبر القنوات في Go من الأدوات الأساسية للتزامن بين الغوروتينات (goroutines). عند الانتهاء من استخدام قناة، من الضروري إغلاقها باستخدام دالة `close` للإشارة إلى أنه لم يعد هناك المزيد من البيانات للإرسال.

### الاستخدام
يتم استخدام دالة `close` بالطريقة التالية:
```go
close(channel)
```
حيث `channel` هو القناة التي ترغب في إغلاقها. بعد إغلاق القناة، ستتلقى أي محاولة لإرسال بيانات إلى هذه القناة خطأً. ومع ذلك، يمكن الاستمرار في استقبال البيانات من القناة حتى يتم استهلاك جميع العناصر.

### التفاصيل
- **الإغلاق المتعدد**: يجب عدم محاولة إغلاق قناة تم إغلاقها مسبقًا، حيث سيؤدي ذلك إلى حدوث حالة "panic".
- **التزامن**: يُفضل إغلاق القنوات من قبل الغوروتينية التي أنشأتها، لتجنب أي تعارضات.
- **الاستقبال بعد الإغلاق**: يمكنك استقبال القيم من القناة بعد إغلاقها، ولكن ستظهر قيمة الصفر لنوع القناة بعد استهلاك جميع البيانات المتاحة.

## الأمثلة
### مثال أساسي
```go
package main

import (
    "fmt"
)

func main() {
    ch := make(chan int)

    go func() {
        for i := 0; i < 5; i++ {
            ch <- i
        }
        close(ch) // إغلاق القناة بعد إرسال جميع القيم
    }()

    for val := range ch {
        fmt.Println(val) // استقبال القيم من القناة
    }
}
```

### مثال على الإغلاق غير الصحيح
```go
package main

import (
    "fmt"
)

func main() {
    ch := make(chan int)
    close(ch) // إغلاق القناة قبل استخدامها

    ch <- 1 // سيؤدي هذا إلى حالة panic
}
```

## الشرح
- **المشاكل الشائعة**: من الأخطاء الشائعة التي قد يقع فيها المبرمجون محاولة إغلاق قناة تم إغلاقها مسبقًا، مما يؤدي إلى حدوث حالة "panic". لذلك، يُنصح بالتحقق من حالة القناة قبل محاولة إغلاقها.
- **نمط التصميم**: من المفيد استخدام نمط تصميم يتضمن إشعار الغوروتينات الأخرى بأنه تم الانتهاء من العمل قبل إغلاق القناة. 

## ملخص من جملة واحدة
تُستخدم دالة `close` في Go لإغلاق القنوات بعد الانتهاء من استخدامها، مما يساعد في إدارة الموارد بشكل فعال.